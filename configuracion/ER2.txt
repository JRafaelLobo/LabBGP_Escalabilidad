hostname ER1
!
interface Lo0
 ip address 20.0.0.252 255.255.255.255
!
interface FastEthernet 0/0.6
 no shutdown

interface FastEthernet 0/0.6
 encapsulation Dot1Q 6
 ip address 50.0.0.18 255.255.255.252
 description ER2 ↔ ISP1
!
interface FastEthernet 0/0.9
 encapsulation Dot1Q 9
 ip address 60.0.0.10 255.255.255.252
 description ER2 ↔ ISP2
!
interface FastEthernet 0/1.12
 encapsulation Dot1Q 12
 ip address 10.0.1.5 255.255.255.252
 description ER2 ↔ C1
!
interface FastEthernet 0/1.13
 encapsulation Dot1Q 13
 ip address 10.0.1.13 255.255.255.252
 description ER2 ↔ C2
!

router ospf 1
 router-id 20.0.0.252
 passive-interface loopback0
 network 20.0.0.252 0.0.0.0 area 0
 network 10.0.1.4 0.0.0.3 area 0
 network 10.0.1.12 0.0.0.3 area 0

router bgp 250
 bgp router-id 20.0.0.251
 network 20.0.0.0 mask 255.255.240.0

 ! ISP1
 neighbor 50.0.0.14 remote-as 101

 ! ISP2
 neighbor 60.0.0.5 remote-as 102

 !IBGP
 bgp log-neighbor-changes

 neighbor 20.0.0.251 remote-as 250
 neighbor 20.0.0.251 update-source loopback0

 neighbor 20.0.0.241 remote-as 250
 neighbor 20.0.0.241 update-source loopback0
 neighbor 20.0.0.241 route-reflector-client

 neighbor 20.0.0.242 remote-as 250
 neighbor 20.0.0.242 update-source loopback0
 neighbor 20.0.0.242 route-reflector-client

 neighbor 20.0.0.231 remote-as 250
 neighbor 20.0.0.231 update-source loopback0
 neighbor 20.0.0.231 route-reflector-client

 neighbor 20.0.0.232 remote-as 250
 neighbor 20.0.0.232 update-source loopback0
 neighbor 20.0.0.232 route-reflector-client
