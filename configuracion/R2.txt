hostname R2
!
interface Loopback0
 ip address 20.0.0.232 255.255.255.255
!
interface Loopback1
 ip address 172.17.0.0 255.255.248.0
!
interface FastEthernet 0/0
 no shutdown
!
interface FastEthernet0/0.15
 encapsulation dot1Q 15
 ip address 10.0.2.6 255.255.255.252
 description R2 ↔ C1
!
interface FastEthernet0/0.18
 encapsulation dot1Q 18
 ip address 10.0.2.14 255.255.255.252
 description R2 ↔ C2
!
router ospf 1
 router-id 20.0.0.232
 passive-interface Loopback0
 passive-interface Loopback1
 network 20.0.0.232 0.0.0.0 area 0
 network 172.17.0.0 0.0.7.255 area 0
 network 10.0.2.4 0.0.0.3 area 0
 network 10.0.2.12 0.0.0.3 area 0
!
router bgp 250
 bgp router-id 20.0.0.232
 network 20.0.0.0 mask 255.255.240.0
 network 172.17.0.0 mask 255.255.248.0
 bgp log-neighbor-changes

 ! iBGP con ER1
 neighbor 20.0.0.252 remote-as 250
 neighbor 20.0.0.252 update-source Loopback0

 ! iBGP con ER2
 neighbor 20.0.0.251 remote-as 250
 neighbor 20.0.0.251 update-source Loopback0

 ! iBGP con C1
 neighbor 20.0.0.241 remote-as 250
 neighbor 20.0.0.241 update-source Loopback0

 ! iBGP con C2
 neighbor 20.0.0.242 remote-as 250
 neighbor 20.0.0.242 update-source Loopback0

 ! iBGP con R1
 neighbor 20.0.0.231 remote-as 250
 neighbor 20.0.0.231 update-source Loopback0